import{R as t,b as w,j as c}from"./index-18c358c5.js";import{a as b,L as j}from"./tour-a6ce37aa.js";import{a as H}from"./room-2d532898.js";import{P as f}from"./PannellumVideo-efd158e4.js";const L="";function E(){var y;const[d,s]=t.useState(null),{idTour:m}=w(),{data:e,status:r}=b({id:String(m)});t.useEffect(()=>{e!=null&&e.data.length&&s(e==null?void 0:e.data[0].id)},[e==null?void 0:e.data]);const i=t.useMemo(()=>{const a=e==null?void 0:e.data[0],n=e==null?void 0:e.data.find(l=>l.id===d);return d?n:a},[d,e==null?void 0:e.data]),{data:u}=H({id:String(d)}),x=({room_id:a})=>()=>{a&&s(a)},g=(a,n)=>{console.log("this func re-render!",n),a.classList.add("custom-tooltip");const l=document.createElement("span");l.innerHTML=n.label,a.appendChild(l),l.style.width=l.scrollWidth-20+"px",l.style.marginLeft=-(l.scrollWidth-a.offsetWidth)/2+"px",l.style.marginTop=-l.scrollHeight-12+"px"};return c.jsx(j,{children:c.jsx(f,{title:i==null?void 0:i.name,width:"100%",height:"93vh",image:r==="success"?L+(i==null?void 0:i.image_url):"",autoLoad:!0,hfov:100,haov:360,vaov:180,pitch:(i==null?void 0:i.pitch)??0,yaw:(i==null?void 0:i.yaw)??0,children:(y=u==null?void 0:u.data)==null?void 0:y.map((a,n)=>a.type==="info"?c.jsx(f.Hotspot,{type:"info",pitch:a==null?void 0:a.pitch,yaw:a==null?void 0:a.yaw,text:a.text},n):c.jsx(f.Hotspot,{type:"custom",pitch:a==null?void 0:a.pitch,yaw:a==null?void 0:a.yaw,tooltip:(a==null?void 0:a.type)==="label"&&g,tooltipArg:{label:a==null?void 0:a.text},cssClass:(a==null?void 0:a.type)==="label"&&"label-custom-style",handleClick:x({room_id:String(a.room_link_id)})},n))})})}export{E as default};
