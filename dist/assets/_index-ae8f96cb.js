import{R as u,j as e,c as v,u as w,_ as M}from"./index-4b47ff25.js";import{b as N,c as S,L as k}from"./tour-371de594.js";import{c as h,A as T,m as C,G as _,_ as D,s as Y,e as L}from"./PulseLoader-2575482b.js";import{B as A}from"./index.esm-f9d75c26.js";import{a as H,d as R}from"./dayjs.min-e8829403.js";const B={hidden:{opacity:0,top:100,transition:{duration:.2}},show:{opacity:1,top:50,transition:{duration:.2}}},J=[10,25,50,100],E=({defaultvalue:t,rows:i=J,onChange:c})=>{const[n,m]=u.useState(!1),o=()=>m(x=>!x),r=x=>()=>{c(x),o()};return e.jsxs("div",{className:"relative",children:[e.jsx("button",{type:"button",onClick:o,className:h("form-select rounded-lg w-[4rem] h-8 md:h-10 md:w-[5rem] text-gray-500 flex justify-center items-center","border-gray-300 focus:border-gray-300 focus:ring-0"),children:t}),e.jsx(T,{children:n&&e.jsx(C.div,{className:"absolute bg-white rounded-md shadow-md w-[6rem] top-14 z-10","aria-label":"row-select-wrapper",variants:B,initial:"hidden",animate:"show",exit:"hidden",children:i.map((x,g)=>e.jsx("div",{role:"button",onClick:r(x),tabIndex:0,className:h("flex items-center justify-between px-3 py-2 text-[1.1rem]",t===x?"bg-blue-100/50 text-black":"text-gray-400"),children:e.jsx("span",{children:x})},g))})})]})},P=({row:t,onChangeRow:i,onChangeSearch:c})=>e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between","aria-label":"filtering",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm md:text-base","aria-label":"filtering__row-select",children:[e.jsx("p",{className:"text-gray-700",children:"Tampilkan"}),e.jsx(E,{defaultvalue:t,onChange:n=>i(n)}),e.jsx("p",{className:"text-gray-700",children:"Masukan"})]}),e.jsxs("div",{className:"relative w-full md:w-4/12 lg:w-2/12 my-5","aria-label":"filtering__input-search",children:[e.jsx("input",{className:h("border-gray-300 focus:border-gray-300 focus:ring-0 px-4 text-gray-900","focus:outline-none w-full tracking-wide rounded-lg","placeholder:font-medium placeholder:tracking-wide placeholder:text-gray-400 text-sm md:text-base","peer/search"),onChange:c,type:"search",placeholder:"Cari nama tour"}),e.jsx(A,{className:"absolute top-3 right-4 peer-focus/search:hidden peer-hover/search:hidden"})]})]});function G(t){return _({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M7 10l5 5 5-5H7z"}}]})(t)}function O(t){return _({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M7 14l5-5 5 5H7z"}}]})(t)}var V={exports:{}};(function(t,i){(function(c,n){t.exports=n(H)})(v,function(c){function n(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var m=n(c),o={name:"id",weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),weekStart:1,formats:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},ordinal:function(r){return r+"."}};return m.default.locale(o,null,!0),o})})(V);const z=["Tanggal di buat","Nama Tour","Action"],K=({data:t})=>{const{mutate:i,status:c}=N(),n=w(),[m,o]=u.useState("Nama Tour"),[r,x]=u.useState("asc"),g=u.useMemo(()=>["Tanggal di buat"].includes(m)?t.sort((s,d)=>{const j=new Date(s.created_at).getTime(),l=new Date(d.created_at).getTime();return r==="asc"?j-l:l-j}):["Nama Tour"].includes(m)?t==null?void 0:t.sort((s,d)=>{var j,l;return r==="asc"?(j=s.name)==null?void 0:j.localeCompare(d.name):(l=d.name)==null?void 0:l.localeCompare(s.name)}):t,[t,m,r]),f=s=>()=>{x(d=>d==="asc"?"desc":"asc"),o(s)},p=s=>()=>n(`/tour/${s}`),y=s=>()=>n(`/editor/${s}`),a=s=>()=>{confirm("Yakin ingin menghapus tour ?")&&i({tour_id:s},{onSuccess:()=>{Y({message:"Berhasil menghapus tour"})},onError:()=>{L({message:"Gagal mengapus tour"})}})};return e.jsx("div",{className:"overflow-x-auto","aria-label":"table-container",children:e.jsxs("table",{className:"w-full border-collapse min-w-[1500px]",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-blue-700 text-white",children:z.map((s,d)=>e.jsx("th",{className:"w-1/6 font-medium py-2 lg:py-3 cursor-pointer text-sm md:text-base",children:e.jsxs("div",{className:"w-max mx-auto flex items-center",onClick:f(s),children:[s,e.jsx("div",{className:"flex flex-col opacity-60 hover:opacity-100",children:s!=="Action"&&e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"translate-y-1"}),e.jsx(G,{className:"-translate-y-1"})]})})]})},d))})}),e.jsxs("tbody",{children:[g==null?void 0:g.map((s,d)=>e.jsxs("tr",{className:h((d+1)%2===0?"bg-blue-500/10":""),children:[e.jsx("td",{className:"w-1/6 py-[.3rem] md:py-[.5rem] lg:py-2 text-center text-sm md:text-base",children:R(s.created_at).locale("id").format("ddd D MMM YYYY")}),e.jsx("td",{className:"w-1/6 py-[.3rem] md:py-[.5rem] lg:py-2 text-center text-sm md:text-base",children:s.name}),e.jsx("td",{className:"w-1/6 py-[.3rem] md:py-[.5rem] lg:py-2 text-center text-sm md:text-base",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("button",{className:h("transition px-5 md:px-7 py-[.30rem] md:py-[.35rem] rounded-md","text-base bg-white text-blue-600","border md:border-2 border-blue-600","text-sm md:text-base","hover:bg-blue-600 hover:text-white"),type:"button",onClick:p(s.id),children:"Jelajahi"}),e.jsx("button",{className:h("transition px-5 md:px-7 py-[.30rem] md:py-[.35rem] rounded-md","text-base bg-white text-blue-600","border md:border-2 border-blue-600","text-sm md:text-base","hover:bg-blue-600 hover:text-white"),type:"button",onClick:y(s.id),children:"Edit"}),e.jsx("button",{disabled:c==="loading",className:h("transition px-5 md:px-7 py-[.30rem] md:py-[.35rem] rounded-md","text-base bg-white text-blue-600","border md:border-2 border-blue-600","text-sm md:text-base","hover:bg-blue-600 hover:text-white"),type:"button",onClick:a(s.id),children:c==="loading"?e.jsx(D,{color:"skyblue",size:10}):"Hapus"})]})})]},d)),e.jsx("tr",{})]})]})})};function $(t,i){const[c,n]=u.useState(t);return u.useEffect(()=>{const m=setTimeout(()=>n(t),i||500);return()=>{clearTimeout(m)}},[t,i]),c}const U=({data:t,row:i,page:c,rowInfo:n,onSetPage:m})=>{const o=u.useMemo(()=>[...Array(Math.ceil(((t==null?void 0:t.length)??1)/i))].map((s,d)=>d+1),[t==null?void 0:t.length,i]),r=Math.ceil(((t==null?void 0:t.length)??1)/i)>5?5:Math.ceil(((t==null?void 0:t.length)??1)/i),x=[...Array(r)].map((a,s)=>s+Math.max(c-Math.floor(r/2),1)),g=a=>()=>m(a),f=()=>m(a=>Math.max(1,a-1)),p=()=>m(a=>Math.min(a+1,o.length)),y=x.map(a=>{if(a<=o.length)return e.jsx("button",{className:h("font-normal tracking-wide rounded-md w-10 text-sm md:text-base",c===a?"text-white border bg-blue-500 h-[2.1rem]":"text-blue-500 border border-blue-500 h-9"),onClick:g(a),children:a},a)});return e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-y-4 mt-8 md:mt-4",children:[e.jsx("div",{"aria-label":"information",children:e.jsxs("p",{className:"text-sm md:text-base",children:["Menampilkan ",n==null?void 0:n.start," sampai ",n==null?void 0:n.end," dari"," ",n==null?void 0:n.length," masukan"]})}),e.jsxs("div",{className:"flex items-center gap-3 tracking-wide text-sm md:text-base","aria-label":"pagination-button",children:[e.jsx("button",{onClick:f,className:h("text-gray-500 bg-gray-100 py-2 px-4 rounded-lg",c===1&&"cursor-not-allowed"),children:"Sebelumnya"}),y,e.jsx("button",{onClick:p,className:h("text-gray-500 bg-gray-100 py-2 px-4 rounded-lg",c===o.length&&"cursor-not-allowed"),children:"Selanjutnya"})]})]})};function F(){const{data:t,status:i,refetch:c}=S(),[n,m]=u.useState(""),o=$(n,1e3),[r,x]=u.useState(10),[g,f]=u.useState({start:0,end:0,length:0}),[p,y]=u.useState(1),a=u.useMemo(()=>{var l;return(l=t==null?void 0:t.data)==null?void 0:l.filter(b=>b.name.toLowerCase().includes(o.toLowerCase()))},[o,t==null?void 0:t.data]),s=u.useMemo(()=>{let l,b;return o.length?(l=(p-1)*r,b=l+r,f({start:a!=null&&a.length?l+1:0,end:b>((a==null?void 0:a.length)??0)?(a==null?void 0:a.length)??0:b,length:(a==null?void 0:a.length)??0})):(l=(p-1)*r,b=l+r,f({start:l+1,end:b>((t==null?void 0:t.data.length)??0)?(t==null?void 0:t.data.length)??0:b,length:(t==null?void 0:t.data.length)??0})),a==null?void 0:a.slice(l,b)},[o.length,a,p,r,t==null?void 0:t.data.length]),d=u.useCallback(l=>{x(l),y(1)},[]),j=u.useCallback(l=>{m(l.target.value),y(1)},[]);return e.jsx(k,{children:e.jsxs("div",{className:"mx-5 my-4",children:[i==="loading"?e.jsx("div",{className:"h-[calc(100vh_-_100px)] flex justify-center items-center",children:e.jsxs("div",{className:"w-max mx-auto p-2","aria-label":"groups-loader",children:[e.jsx(M,{color:"blue",width:200,height:3}),e.jsx("p",{className:"text-sm md:text-base mt-2 text-gray-500 text-center",children:"Mengambil data tour ..."})]})}):null,i==="success"?(s==null?void 0:s.length)===0?e.jsx("div",{className:"py-10",children:e.jsx("p",{className:"text-center text-lg font-light",children:"Tidak ada data"})}):e.jsxs(e.Fragment,{children:[e.jsx(P,{row:r,onChangeRow:d,onChangeSearch:j}),e.jsx(K,{data:s??[]}),e.jsx(U,{page:p,row:r,rowInfo:g,onSetPage:y,data:o?a:t==null?void 0:t.data})]}):null,i==="error"?e.jsx("div",{className:"h-[calc(100vh_-_100px)] flex justify-center items-center",children:e.jsxs("div",{className:"w-max mx-auto my-4 flex flex-col items-center justify-center gap-3",children:[e.jsx("p",{className:"text-sm md:text-base mt-2 text-gray-500",children:"Gagal mengambil data tour"}),e.jsx("button",{className:h("transition px-5 md:px-7 py-[.30rem] md:py-[.35rem] text-base border md:border-2 border-[#1F3DBD] bg-white rounded-md text-[#1F3DBD]","text-sm md:text-base"),type:"button",onClick:()=>c(),children:"Muat ulang"})]})}):null]})})}export{F as default};
