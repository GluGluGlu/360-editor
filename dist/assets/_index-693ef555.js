import{d as k,n as ie,j as t,c as p,r as V,e as U,f as q,b as H,R as x,h as z,i as Y,u as oe,k as Z,l as Q}from"./index-1d66920e.js";import{c as B,A as D,d as le,a as X,e as ce,L as de}from"./tour-27cc033d.js";import{G as C,c as _}from"./iconBase-5c896436.js";import{u as ue,M as me,A as pe,e as N}from"./error-toaster-a965550d.js";import{a as ge}from"./index.esm-6e52e508.js";import{u as fe,b as xe,a as he}from"./room-14ea4492.js";import{P as G}from"./PannellumVideo-518fd5eb.js";k({key:"scene",default:[]});k({key:"scene-menu",default:null});const J=k({key:"viewer-coordinate",default:{pitch:0,yaw:0}}),K=k({key:"initial-viewer-coordinate",default:{pitch:0,yaw:0}});function be(e){return C({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"}}]})(e)}function ve(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 464c114.9 0 208-93.1 208-208S370.9 48 256 48 48 141.1 48 256s93.1 208 208 208zm0-244.5l-81.1 81.9c-7.5 7.5-19.8 7.5-27.3 0s-7.5-19.8 0-27.3l95.7-95.4c7.3-7.3 19.1-7.5 26.6-.6l94.3 94c3.8 3.8 5.7 8.7 5.7 13.7 0 4.9-1.9 9.9-5.6 13.6-7.5 7.5-19.7 7.6-27.3 0l-81-79.9z"}}]})(e)}function ye(e){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 277.333H277.333V416h-42.666V277.333H96v-42.666h138.667V96h42.666v138.667H416v42.666z"}}]})(e)}function je(e){return C({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z"}}]})(e)}function we(e){return C({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M231.4,44.34s0,.1,0,.15l-58.2,191.94a15.88,15.88,0,0,1-14,11.51q-.69.06-1.38.06a15.86,15.86,0,0,1-14.42-9.15l-35.71-75.39a4,4,0,0,1,.79-4.54l57.26-57.27a8,8,0,0,0-11.31-11.31L97.08,147.6a4,4,0,0,1-4.54.79l-75-35.53A16.37,16.37,0,0,1,8,97.36,15.89,15.89,0,0,1,19.57,82.84l191.94-58.2.15,0A16,16,0,0,1,231.4,44.34Z"}}]})(e)}const S=({message:e})=>ie.success(()=>t.jsx("p",{className:"py-2",children:e}),{position:"top-right",duration:3e3});var W={},P=p&&p.__assign||function(){return P=Object.assign||function(e){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P.apply(this,arguments)},_e=p&&p.__createBinding||(Object.create?function(e,n,s,a){a===void 0&&(a=s);var r=Object.getOwnPropertyDescriptor(n,s);(!r||("get"in r?!n.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(e,a,r)}:function(e,n,s,a){a===void 0&&(a=s),e[a]=n[s]}),Ne=p&&p.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),Se=p&&p.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var s in e)s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)&&_e(n,e,s);return Ne(n,e),n},Ce=p&&p.__rest||function(e,n){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]]);return s};Object.defineProperty(W,"__esModule",{value:!0});var R=Se(V),E=q,Oe=U,Me=(0,Oe.createAnimation)("PulseLoader","0% {transform: scale(1); opacity: 1} 45% {transform: scale(0.1); opacity: 0.7} 80% {transform: scale(1); opacity: 1}","pulse");function Re(e){var n=e.loading,s=n===void 0?!0:n,a=e.color,r=a===void 0?"#000000":a,d=e.speedMultiplier,h=d===void 0?1:d,g=e.cssOverride,b=g===void 0?{}:g,u=e.size,f=u===void 0?15:u,m=e.margin,v=m===void 0?2:m,l=Ce(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),i=P({display:"inherit"},b),c=function(w){return{backgroundColor:r,width:(0,E.cssValue)(f),height:(0,E.cssValue)(f),margin:(0,E.cssValue)(v),borderRadius:"100%",display:"inline-block",animation:"".concat(Me," ").concat(.75/h,"s ").concat(w*.12/h,"s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08)"),animationFillMode:"both"}};return s?R.createElement("span",P({style:i},l),R.createElement("span",{style:c(1)}),R.createElement("span",{style:c(2)}),R.createElement("span",{style:c(3)})):null}var ee=W.default=Re;const Pe="",Te=({isShow:e,onClose:n})=>{var l;const{idTour:s}=H(),{data:a}=ue(),{mutate:r,status:d}=fe(),[h,g]=x.useState("Ruangan"),[b,u]=x.useState(null),f=i=>()=>u(i),m=()=>{n(),u(null)},v=()=>{if(!b){N({message:"Silahkan pilih gambar dahulu"});return}r({image_url:b,name:h,tour_id:Number(s)},{onSuccess:()=>{S({message:"Behasil membuat ruangan baru"}),g("Ruangan"),u(null),m()},onError:()=>{N({message:"Gagal membuat ruangan"})}})};return t.jsx(me,{show:e,children:t.jsxs("div",{className:"bg-white rounded-sm px-4 w-5/12",children:[t.jsx("header",{className:"flex justify-end pt-3","aria-label":"modal-head",children:t.jsx("button",{disabled:d==="loading",type:"button",onClick:m,children:t.jsx(pe,{className:"text-lg"})})}),t.jsxs("div",{className:"py-4","aria-label":"modal-body",children:[t.jsx("div",{className:"max-h-[330px] overflow-auto","aria-label":"images-container",children:t.jsx("div",{className:"grid grid-cols-2 gap-3 pr-2","aria-label":"images-wrapper",children:(l=a==null?void 0:a.data)==null?void 0:l.map((i,c)=>t.jsxs("div",{className:_("col-span-1 cursor-pointer relative"),onClick:f(i.file_path),children:[t.jsx("img",{src:Pe+(i==null?void 0:i.file_path),alt:"avatar",loading:"lazy"}),b===i.file_path&&t.jsx("div",{className:"absolute inset-0 bg-black/60 z-10 flex justify-center items-center","aria-label":"selected-overlay",children:t.jsx("div",{className:"bg-white flex flex-col justify-center items-center rounded-full p-1",children:t.jsx(ge,{className:"text-4xl text-blue-600"})})})]},c))})}),t.jsxs("div",{className:"mt-3 px-3","aria-label":"submit-container",children:[t.jsxs("div",{className:"text-white",children:[t.jsx("label",{htmlFor:"tour-name",className:"text-sm",children:"Tour name"}),t.jsx("input",{id:"tour-name",type:"text",className:_("border-gray-300 focus:border-gray-300 focus:ring-0 px-4 text-gray-900","focus:outline-none w-full tracking-wide rounded-md","placeholder:font-medium placeholder:tracking-wide placeholder:text-gray-400","peer/search"),value:h,onChange:i=>g(i.target.value)})]}),t.jsx("button",{disabled:d==="loading",type:"button",onClick:v,className:"bg-blue-500 relative text-white w-full px-3 py-2 rounded-md font-medium mt-4",children:d==="loading"?t.jsx(ee,{color:"white",size:10}):"Simpan"})]})]})]})})},ke=()=>{const e=z();return B({mutationFn:async s=>{const a=new FormData;return a.append("tour_id",String(s.tour_id)),a.append("room_id",String(s.room_id)),a.append("pitch",String(s.pitch)),a.append("yaw",String(s.yaw)),a.append("type",String(s.type)),a.append("text",String(s.text??"")),(await D.post("/api/hotspot",a)).data},onSuccess:()=>e.invalidateQueries(["HOTSPOTS"])})},te=()=>{const e=z();return B({mutationFn:async s=>(await D.post(`/api/hotspot/${s.hostpot_id}`,s.payload,{headers:{"content-type":"application/x-www-form-urlencoded"}})).data,onSuccess:()=>e.invalidateQueries(["HOTSPOTS"])})},ae=()=>{const e=z();return B({mutationFn:async({hostpot_id:s})=>(await D.delete(`/api/hotspot/${s}`)).data,onSuccess:()=>e.invalidateQueries(["HOTSPOTS"])})},$={addRuangan:!1},Ie=()=>{const[e]=Y(),{idTour:n}=H(),s=oe(),a=e.get("roomId"),{data:r}=le({tour_id:Number(n)}),{data:d}=X({id:Number(n)}),{mutate:h,status:g}=ce(),{mutate:b}=ke(),u=x.useMemo(()=>d==null?void 0:d.data,[d==null?void 0:d.data]),[f,m]=x.useState(""),[v,l]=x.useState($),i=Z(K),c=Q(J);x.useEffect(()=>{m(r==null?void 0:r.data.name)},[r==null?void 0:r.data.name]);const w=y=>()=>s(`/editor/${n}?roomId=${y}`),I=x.useCallback(y=>()=>{switch(y){case"addRuangan":l({addRuangan:!0});break}},[]),O=y=>()=>{b({pitch:c.pitch,yaw:c.yaw,type:y,tour_id:Number(n),room_id:Number(a)},{onSuccess:()=>{S({message:"Berhasil menambah hotspot"})},onError:()=>{N({message:"Gagal menambah hotspot"})}}),i({pitch:c.pitch,yaw:c.yaw})},o=()=>{h({tour_id:Number(n),name:f},{onSuccess:()=>{S({message:"Success update tour"})},onError:()=>{N({message:"Failed update tour"})}})},j=x.useCallback(()=>l($),[]);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:_("col-span-2 bg-gray-800 pt-2 pb-5","min-h-[calc(100vh_-_60px)] flex flex-col justify-between"),children:[t.jsxs("div",{children:[t.jsxs("section",{className:"text-white py-1","aria-label":"tools",children:[t.jsx("h3",{className:"text-[.85rem] font-semibold px-5 text-gray-300",children:"TOOLS"}),t.jsxs("div",{className:"mt-2 flex flex-col gap-[3px]","aria-label":"btn-action-contianer",children:[t.jsxs("button",{className:_("flex items-center gap-3 px-5 w-full py-[10px] bg-gray-700 hover:bg-gray-600 transition"),type:"button",onClick:O("info"),children:[t.jsx(be,{className:"text-2xl"}),t.jsx("p",{children:"Tambah Text"})]}),t.jsxs("button",{className:_("flex items-center gap-3 px-5 w-full py-[10px] bg-gray-700 hover:bg-gray-600 transition"),type:"button",onClick:O("custom"),children:[t.jsx(ve,{className:"text-2xl"}),t.jsx("p",{children:"Tambah Hotspot"})]}),t.jsxs("button",{className:"flex items-center gap-3 px-5 w-full py-[10px] bg-gray-700",type:"button",children:[t.jsx(je,{className:"text-2xl"}),t.jsx("p",{children:"Tetapkan view awal"})]})]})]}),t.jsxs("section",{className:"mt-2","aria-label":"ruangan",children:[t.jsxs("header",{className:"flex items-center justify-between pr-4",children:[t.jsx("h3",{className:"text-[.85rem] font-semibold px-5 text-gray-300",children:"RUANGAN"}),t.jsx("button",{className:"border border-white rounded-md p-[.4rem]",onClick:I("addRuangan"),children:t.jsx(ye,{className:"text-white"})})]}),t.jsx("div",{className:"max-h-[300px] overflow-auto mt-2","aria-label":"list-ruangan-container",children:t.jsx("div",{className:"text-white flex flex-col gap-[3px]","aria-label":"list-ruangan-wrapper",children:u==null?void 0:u.map((y,M)=>t.jsxs("button",{className:_("flex items-center gap-3 px-5 w-full py-3",Number(a)===y.id?"bg-gray-600":"bg-gray-700"),type:"button",onClick:w(y.id),children:[t.jsx(we,{className:"text-xl"}),t.jsx("p",{className:"text-[.9rem]",children:y.name})]},M))})})]})]}),t.jsxs("div",{className:"mt-3 px-3","aria-label":"submit",children:[t.jsxs("div",{className:"text-white",children:[t.jsx("label",{htmlFor:"tour-name",className:"text-sm",children:"Tour name"}),t.jsx("input",{id:"tour-name",type:"text",className:_("border-gray-300 focus:border-gray-300 focus:ring-0 px-4 text-gray-900","focus:outline-none w-full tracking-wide rounded-md","placeholder:font-medium placeholder:tracking-wide placeholder:text-gray-400","peer/search"),value:f,onChange:y=>m(y.target.value)})]}),t.jsx("button",{onClick:o,disabled:g==="loading",className:"bg-blue-500 relative text-white w-full px-3 py-2 rounded-md font-medium mt-4",children:g==="loading"?t.jsx(ee,{color:"white",size:10}):"Simpan"})]})]}),t.jsx(Te,{isShow:v.addRuangan,onClose:j})]})};function ne(e){return C({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z"}}]})(e)}function Ee(e){return C({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"}}]})(e)}var re={},T=p&&p.__assign||function(){return T=Object.assign||function(e){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T.apply(this,arguments)},He=p&&p.__createBinding||(Object.create?function(e,n,s,a){a===void 0&&(a=s);var r=Object.getOwnPropertyDescriptor(n,s);(!r||("get"in r?!n.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(e,a,r)}:function(e,n,s,a){a===void 0&&(a=s),e[a]=n[s]}),ze=p&&p.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),Be=p&&p.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var s in e)s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)&&He(n,e,s);return ze(n,e),n},De=p&&p.__rest||function(e,n){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]]);return s};Object.defineProperty(re,"__esModule",{value:!0});var Ae=Be(V),L=q,Fe=U,Ge=(0,Fe.createAnimation)("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function $e(e){var n=e.loading,s=n===void 0?!0:n,a=e.color,r=a===void 0?"#000000":a,d=e.speedMultiplier,h=d===void 0?1:d,g=e.cssOverride,b=g===void 0?{}:g,u=e.size,f=u===void 0?35:u,m=De(e,["loading","color","speedMultiplier","cssOverride","size"]),v=T({background:"transparent !important",width:(0,L.cssValue)(f),height:(0,L.cssValue)(f),borderRadius:"100%",border:"2px solid",borderTopColor:r,borderBottomColor:"transparent",borderLeftColor:r,borderRightColor:r,display:"inline-block",animation:"".concat(Ge," ").concat(.75/h,"s 0s infinite linear"),animationFillMode:"both"},b);return s?Ae.createElement("span",T({style:v},m)):null}var se=re.default=$e;const Le=({hotspot:e,coordinateX:n,coordinateY:s,forceRenderPanorana:a,onClose:r})=>{const d=x.useRef(null),{mutate:h,status:g}=te(),{mutate:b,status:u}=ae(),[f,m]=x.useState((e==null?void 0:e.text)??"");x.useEffect(()=>{m(e.text)},[e.text]);const v=()=>{const i=new FormData;i.append("text",f),i.append("_method","PUT"),h({hostpot_id:Number(e.id),payload:i},{onSuccess:()=>{S({message:"Berhasil update hotspot"}),r()},onError:()=>{N({message:"Gagal update hotspot"}),r()}})},l=()=>{confirm("Yakin ingin menghapus hotspot ini ?")&&b({hostpot_id:e.id},{onSuccess:()=>{r(),S({message:"Berhasil menghapus hotspot"}),a()},onError:()=>{N({message:"Gagal menghapus hotspot"})}})};return t.jsxs(t.Fragment,{children:[t.jsx("div",{ref:d,onClick:i=>i.stopPropagation(),style:{position:"fixed",zIndex:"1000",left:n+30,top:s+10},className:"bg-white/90 rounded-md p-3",children:t.jsxs("div",{children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{htmlFor:"information-text",className:"font-medium",children:"Information text"}),t.jsx("input",{id:"information-text",type:"text",className:"rounded-md",value:f,onChange:i=>m(i.target.value)})]}),t.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[t.jsx("div",{children:(g==="loading"||u==="loading")&&t.jsx(se,{size:16})}),t.jsxs("div",{className:"flex justify-center items-center gap-x-3",children:[t.jsx("button",{disabled:g==="loading",type:"button",onClick:v,children:"Save"}),t.jsx("button",{disabled:u==="loading",onClick:l,type:"button",className:"w-max",children:t.jsx(ne,{className:"text-xl"})})]})]})]})}),t.jsx("div",{onClick:r,className:"absolute inset-0 z-[51] bg-transparent","aria-label":"overlay"})]})},Ve=({hotspot:e,coordinateX:n,coordinateY:s,forceRenderPanorana:a,onClose:r})=>{const{idTour:d}=H(),{data:h}=X({id:Number(d)}),{mutate:g,status:b}=te(),{mutate:u,status:f}=ae(),[m,v]=x.useState((e==null?void 0:e.room_link_id)??null),l=()=>{const c=new FormData;c.append("room_link_id",String(m)),c.append("_method","PUT"),g({hostpot_id:Number(e.id),payload:c},{onSuccess:()=>{S({message:"Berhasil update hotspot"}),r(),v(null)},onError:()=>{N({message:"Gagal update hotspot"}),r(),v(null)}})},i=()=>{confirm("Yakin ingin menghapus hotspot ini ?")&&u({hostpot_id:e.id},{onSuccess:()=>{r(),S({message:"Berhasil menghapus hotspot"}),a()},onError:()=>{N({message:"Gagal menghapus hotspot"})}})};return t.jsxs(t.Fragment,{children:[t.jsx("div",{onClick:c=>c.stopPropagation(),style:{position:"fixed",zIndex:"1000",left:n+30,top:s+10},className:"bg-white/90 rounded-md p-3 w-3/12",children:t.jsxs("div",{children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Select target room"}),t.jsx("div",{className:"my-3",children:h==null?void 0:h.data.map((c,w)=>t.jsx("button",{type:"button",className:_("bg-gray-300 transition w-full text-left px-2 py-2",c.id===m?"bg-gray-400 text-white":""),onClick:()=>{v(c.id)},children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("p",{children:c.name}),(e==null?void 0:e.room_link_id)===c.id&&t.jsx(Ee,{className:"text-2xl"})]})},w))})]}),t.jsxs("div",{className:"mt-2 flex justify-between items-center ",children:[t.jsx("div",{children:(b==="loading"||f==="loading")&&t.jsx(se,{size:16})}),t.jsxs("div",{className:"mt-2 flex justify-end items-center gap-x-4",children:[t.jsx("button",{onClick:l,disabled:b==="loading",type:"button",children:"Save"}),t.jsx("button",{onClick:i,className:"w-max",type:"button",disabled:f==="loading",children:t.jsx(ne,{className:"text-xl"})})]})]})]})}),t.jsx("div",{onClick:r,className:"absolute inset-0 z-[51] bg-transparent","aria-label":"overlay"})]})},Ue="",qe=()=>{const[e]=Y(),{data:n,status:s}=xe({id:String(e.get("roomId"))}),{data:a}=he({id:String(e.get("roomId"))}),r=x.useRef(null),d=Q(K),h=Z(J),[g,b]=x.useState(null),[u,f]=x.useState(null),[m,v]=x.useState({x:0,y:0}),l=x.useMemo(()=>n==null?void 0:n.data,[n==null?void 0:n.data,e.get("roomId")]),i=x.useMemo(()=>a==null?void 0:a.data.find(j=>j.id===Number(u)),[a==null?void 0:a.data,u]),c=({type:o,id:j})=>()=>{b(o),f(j)},w=x.useCallback(()=>{b(null),f(null)},[]),I=o=>{o.preventDefault(),v({x:o.clientX,y:o.clientY})},O=()=>{var y,M,A,F;const o=(M=(y=r==null?void 0:r.current)==null?void 0:y.getViewer())==null?void 0:M.getPitch(),j=(F=(A=r==null?void 0:r.current)==null?void 0:A.getViewer())==null?void 0:F.getYaw();h({pitch:o,yaw:j})};return t.jsxs("div",{className:"col-span-10 h-[calc(100vh_-_60px)] overflow-scroll relative",onClick:I,children:[t.jsx(G,{ref:r,title:l==null?void 0:l.name,width:"100%",height:"90vh",image:s==="success"?Ue+(l==null?void 0:l.image_url):"",autoLoad:!0,hfov:100,haov:360,vaov:180,pitch:d.pitch??(l==null?void 0:l.pitch),yaw:d.yaw??(l==null?void 0:l.yaw),hotspotDebug:!0,onRender:O,children:a==null?void 0:a.data.map((o,j)=>t.jsx(G.Hotspot,{type:"custom",pitch:o==null?void 0:o.pitch,yaw:o==null?void 0:o.yaw,autoRotate:0,cssClass:o.type=="info"?"info-custom-style":"",handleClick:c({id:String(o==null?void 0:o.id),type:o==null?void 0:o.type})},j))}),g==="info"&&u&&t.jsx(Le,{hotspot:i,coordinateX:m.x,coordinateY:m.y,forceRenderPanorana:()=>r.current.forceRender(),onClose:w}),g==="custom"&&u&&t.jsx(Ve,{hotspot:i,coordinateX:m.x,coordinateY:m.y,forceRenderPanorana:()=>r.current.forceRender(),onClose:w})]})};function et(){return t.jsx(de,{children:t.jsxs("div",{className:"grid grid-cols-12","aria-label":"editor-container",children:[t.jsx(Ie,{}),t.jsx(qe,{})]})})}export{et as default};
